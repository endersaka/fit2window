<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Fit to window</title>
    <style type="text/css">
      .bg {
        position: relative;
        top: 0;
        left: 0;
      }

      .bgwidth {
        /*width: 100%;*/
      }

      .bgheight {
        /*height: 100%;*/
      }
    </style>
  </head>
  <body>
    <img src="img/Fig04-01.png" id="bg" alt="">
    <script type="text/javascript">
      function getStyleAsStringExcluding(el, exclude = []) {
        var style = el.style;
        for (var i = 0; i < exclude.length; i++) {
          style.removeProperty(exclude[i]);
        }
        var styleArr = Array.from(style);
        var str = styleArr.map(function (pair) {
          return pair.join(': ');
        }).join('; ');
        console.log('Style Attrubute Value: ' + str);
        return str;
      }

      var fit2window = function(event) {
        var img = document.getElementsByTagName('img')[0];
        var imgSrc = img.getAttribute('src');
        var imgBounds = img.getBoundingClientRect();

        var w = img.clientWidth;
        var h = img.clientHeight;

        console.log('Image "%s": boundingClientRect ( %ipx, %ipx)', imgSrc, imgBounds.width, imgBounds.height);
        console.log('Image "%s": client dimensions ( %ipx, %ipx)', imgSrc, w, h);
        console.log('Image "%s": offset dimensions ( %ipx, %ipx)', imgSrc, img.offsetWidth, img.offsetHeight);
        console.log('Image "%s": dimensions ( %ipx, %ipx)', imgSrc, img.width, img.height);
        console.log('Image "%s": natural dimensions ( %ipx, %ipx)', imgSrc, img.naturalWidth, img.naturalHeight);

        var imgAspectRatio = img.naturalWidth / img.naturalHeight;

        var winW = window.innerWidth;
        var winH = window.innerHeight;
        var winPixelRatio = window.devicePixelRatio;
        var winAspectRatio = winW / winH;

        var styleStr = getStyleAsStringExcluding(img, ['width', 'height']);

        if (winAspectRatio < imgAspectRatio) {
          // img.setAttribute('class', 'bg bgheight');
          // img.style.height = winH + 'px';
          styleStr += 'height: ' + winH + 'px';
          // img.setAttribute('style', styleStr);
        } else {
          // img.setAttribute('class', 'bg bgwidth');
          // img.style.width = winW + 'px';
          styleStr += 'width: ' + winW + 'px';
        }

        img.setAttribute('style', styleStr);
      };

      window.onload = fit2window;
      window.onresize = fit2window;
    </script>
  </body>
</html>
